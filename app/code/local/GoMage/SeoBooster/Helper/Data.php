<?php eval(base64_decode("LyoqICogR29NYWdlIFNlbyBCb29zdGVyIEV4dGVuc2lvbiAqICogQGNhdGVnb3J5IEV4dGVuc2lvbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgR29NYWdlIChodHRwOi8vd3d3LmdvbWFnZS5jb20pICogQGF1dGhvciBHb01hZ2UgKiBAbGljZW5zZSBodHRwOi8vd3d3LmdvbWFnZS5jb20vbGljZW5zZS1hZ3JlZW1lbnQvIFNpbmdsZSBkb21haW4gbGljZW5zZSAqIEB0ZXJtcyBvZiB1c2UgaHR0cDovL3d3dy5nb21hZ2UuY29tL3Rlcm1zLW9mLXVzZS8gKiBAdmVyc2lvbiBSZWxlYXNlOiAxLjMuMCAqIEBzaW5jZSBBdmFpbGFibGUgc2luY2UgUmVsZWFzZSAxLjAuMCAqLyBjbGFzcyBHb01hZ2VfU2VvQm9vc3Rlcl9IZWxwZXJfRGF0YSBleHRlbmRzIE1hZ2VfQ29yZV9IZWxwZXJfRGF0YSB7IGNvbnN0IENBTk9OSUNBTF9VUkxfRElTQUJMRUQgPSAwOyBjb25zdCBDQU5PTklDQUxfVVJMX1BST0RVQ1RTID0gMTsgY29uc3QgQ0FOT05JQ0FMX1VSTF9DQVRFR09SSUVTID0gMjsgY29uc3QgQ0FOT05JQ0FMX1VSTF9QUk9EVUNUU19DQVRFR09SSUVTID0gMzsgY29uc3QgQ0FOT05JQ0FMX1VSTF9ERUZBVUxUX0RPTUFJTl9WQUxVRSA9IDA7IC8qKiAqIFJldHVybiBtb2R1bGUgc3RhdHVzICogKiBAcmV0dXJuIGJvb2wgKi8gcHVibGljIGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2Vfc2VvYm9vc3Rlci9nZW5lcmFsL2VuYWJsZWQnKSAmJiAoaW5fYXJyYXkoTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFdlYnNpdGVJZCgpLCAkdGhpcy0+Z2V0QXZhaWxhYmxlV2Vic2l0ZXMoKSkgfHwgTWFnZTo6YXBwKCktPmdldFN0b3JlKCktPmdldFdlYnNpdGVJZCgpID09IDApOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRJc0FueW1vcmVWZXJzaW9uKCRtYWpvciwgJG1pbm9yLCAkcmV2aXNpb24gPSAwKSB7ICR2ZXJzaW9uX2luZm8gPSBNYWdlOjpnZXRWZXJzaW9uSW5mbygpOyBpZiAoJHZlcnNpb25faW5mb1snbWFqb3InXSA+ICRtYWpvcikgeyByZXR1cm4gdHJ1ZTsgfSBlbHNlaWYgKCR2ZXJzaW9uX2luZm9bJ21ham9yJ10gPT0gJG1ham9yKSB7IGlmICgkdmVyc2lvbl9pbmZvWydtaW5vciddID4gJG1pbm9yKSB7IHJldHVybiB0cnVlOyB9IGVsc2VpZiAoJHZlcnNpb25faW5mb1snbWlub3InXSA9PSAkbWlub3IpIHsgaWYgKCR2ZXJzaW9uX2luZm9bJ3JldmlzaW9uJ10gPj0gJHJldmlzaW9uKSB7IHJldHVybiB0cnVlOyB9IH0gfSByZXR1cm4gZmFsc2U7IH0gLyoqICogUmV0dXJuIHVybCBieSByb3V0ZSAqICogQHBhcmFtIHN0cmluZyAkcm91dGUgUm91dGUgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcyBSb3V0ZSBwYXJhbXMgKiBAcGFyYW0gaW50fG51bGwgJHN0b3JlSWQgU3RvcmUgSWQgKiBAcmV0dXJuIHN0cmluZyAqLyBwdWJsaWMgZnVuY3Rpb24gZ2V0VXJsKCRyb3V0ZSwgJHBhcmFtcyA9IGFycmF5KCksICRzdG9yZUlkID0gbnVsbCkgeyBpZiAoIWlzX251bGwoJHN0b3JlSWQpKSB7ICRzdG9yZSA9IE1hZ2U6OmFwcCgpLT5nZXRTdG9yZSgkc3RvcmVJZCk7IH0gaWYgKCR0aGlzLT5pc0VuYWJsZWQoKSkgeyAkdXJsTW9kZWwgPSBNYWdlOjpnZXRNb2RlbCgnZ29tYWdlX3Nlb2Jvb3N0ZXIvdXJsJyk7IGlmIChpc3NldCgkc3RvcmUpKSB7ICR1cmxNb2RlbC0+c2V0U3RvcmUoJHN0b3JlKTsgfSByZXR1cm4gJHVybE1vZGVsLT5nZXRVcmwoJHJvdXRlLCAkcGFyYW1zKTsgfSBpZiAoaXNzZXQoJHN0b3JlKSkgeyByZXR1cm4gJHN0b3JlLT5nZXRVcmwoJHJvdXRlLCAkcGFyYW1zKTsgfSByZXR1cm4gJHRoaXMtPl9nZXRVcmwoJHJvdXRlLCAkcGFyYW1zKTsgfSBwdWJsaWMgZnVuY3Rpb24gY2FuQWRkVHJhaWxpbmdTbGFzaCgpIHsgcmV0dXJuICR0aGlzLT5pc0VuYWJsZWQoKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX3Nlb2Jvb3N0ZXIvZ2VuZXJhbC9hZGRfdHJhaWxpbmdfc2xhc2gnKTsgfSBwdWJsaWMgZnVuY3Rpb24gYWRkVHJhaWxpbmdTbGFzaCgkcm91dGVQYXRoKSB7IGlmICgkdGhpcy0+Y2FuQWRkVHJhaWxpbmdTbGFzaCgpKSB7ICRwYXRoID0gdXJsZGVjb2RlKCRyb3V0ZVBhdGgpOyBpZiAoKHByZWdfbWF0Y2goJy9cLlthLXpdezIsNH0kLycsICRwYXRoKSA9PT0gMCkgJiYgKHN1YnN0cigkcGF0aCwgLTEpICE9ICcvJykpIHsgcmV0dXJuICRyb3V0ZVBhdGggLiAnLyc7IH0gfSByZXR1cm4gJHJvdXRlUGF0aDsgfSAvKiogKiBDYW4gdXNlIHVybCByZXdyaXRlIGZvciBwcm9kdWN0IHJldmlld3MgKiAqIEByZXR1cm4gYm9vbCAqLyBwdWJsaWMgZnVuY3Rpb24gY2FuVXNlUHJvZHVjdFJldmlld3NVcmxSZXdyaXRlKCkgeyByZXR1cm4gJHRoaXMtPmlzRW5hYmxlZCgpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2Vfc2VvYm9vc3Rlci91cmxfcmV3cml0ZS9lbmFibGVfcHJvZHVjdF9yZXZpZXdfdXJsX3Jld3JpdGUnKTsgfSAvKiogKiBSZXR1cm4gcHJvZHVjdCByZXZpZXdzIHVybCByZXdyaXRlIHBhdGggKiAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0UmV2aWV3c1VybFJld3JpdGVQYXRoKCkgeyByZXR1cm4gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9zZW9ib29zdGVyL3VybF9yZXdyaXRlL3Byb2R1Y3RfcmV2aWV3X3Jld3JpdGVfcGF0aCcpOyB9IC8qKiAqIENhbiB1c2UgdXJsIHJld3JpdGUgZm9yIHRhZ3MgKiAqIEByZXR1cm4gYm9vbCAqLyBwdWJsaWMgZnVuY3Rpb24gY2FuVXNlVGFnVXJsUmV3cml0ZSgpIHsgcmV0dXJuICR0aGlzLT5pc0VuYWJsZWQoKSAmJiBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX3Nlb2Jvb3N0ZXIvdXJsX3Jld3JpdGUvZW5hYmxlX3RhZ191cmxfcmV3cml0ZScpOyB9IC8qKiAqIFJldHVybiB0YWdzIHVybCByZXdyaXRlIHBhdGggKiAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRUYWdSZXdyaXRlUGF0aCgpIHsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2Vfc2VvYm9vc3Rlci91cmxfcmV3cml0ZS90YWdfdXJsX3Jld3JpdGVfcGF0aCcpOyB9IC8qKiAqIENhbiB1c2UgcnNzIHVybCByZXdyaXRlICogKiBAcmV0dXJuIGJvb2wgKi8gcHVibGljIGZ1bmN0aW9uIGNhblVzZVJzc1VybFJld3JpdGUoKSB7IHJldHVybiAkdGhpcy0+aXNFbmFibGVkKCkgJiYgTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9zZW9ib29zdGVyL3VybF9yZXdyaXRlL2VuYWJsZV9yc3NfdXJsX3Jld3JpdGUnKTsgfSAvKiogKiBSZXR1cm4gcnNzIHVybCByZXdyaXRlIHBhdGggKiAqIEByZXR1cm4gc3RyaW5nICovIHB1YmxpYyBmdW5jdGlvbiBnZXRSc3NVcmxSZXdyaXRlUGF0aCgpIHsgcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2Vfc2VvYm9vc3Rlci91cmxfcmV3cml0ZS9yc3NfdXJsX3Jld3JpdGVfcGF0aCcpOyB9IC8qKiAqIElzIHJpY2ggc25pcHBldCBlbmFibGUgKiAqIEByZXR1cm4gbWl4ZWQgKi8gcHVibGljIGZ1bmN0aW9uIGlzUmljaFNuaXBwZXRFbmFibGVkKCkgeyByZXR1cm4gJHRoaXMtPmlzRW5hYmxlZCgpICYmIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2Vfc2VvYm9vc3Rlci9nZW5lcmFsL2VuYWJsZV9yaWNoX3NuaXBwZXRzJyk7IH0gLyoqICogRm9ybWF0IEtleSBmb3IgVVJMICogKiBAcGFyYW0gc3RyaW5nICRzdHIgKiBAcmV0dXJuIHN0cmluZyAqLyBwdWJsaWMgZnVuY3Rpb24gZm9ybWF0VXJsS2V5KCRzdHIpIHsgJHVybEtleSA9IHByZWdfcmVwbGFjZSgnI1teMC05YS16XSsjaScsICctJywgTWFnZTo6aGVscGVyKCdjYXRhbG9nL3Byb2R1Y3RfdXJsJyktPmZvcm1hdCgkc3RyKSk7ICR1cmxLZXkgPSBzdHJ0b2xvd2VyKCR1cmxLZXkpOyAkdXJsS2V5ID0gdHJpbSgkdXJsS2V5LCAnLScpOyByZXR1cm4gJHVybEtleTsgfSAvKiogKiBSZXR1cm4gcm9ib3RzIGZvciBwcm9kdWN0LCBjYXRlZ29yeSBvciBjbXMgcGFnZSAqICogQHBhcmFtIE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0fE1hZ2VfQ2F0YWxvZ19Nb2RlbF9DYXRlZ29yeXxNYWdlX0Ntc19Nb2RlbF9QYWdlICRlbnRpdHkgRW50aXR5ICogQHJldHVybiBzdHJpbmcgKi8gcHVibGljIGZ1bmN0aW9uIGdldFJvYm90cygkZW50aXR5KSB7IGlmICgoJHJvYm90cyA9ICRlbnRpdHktPmdldFJvYm90cygpKSAmJiAkdGhpcy0+aXNFbmFibGVkKCkpIHsgcmV0dXJuICRyb2JvdHM7IH0gcmV0dXJuIE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdkZXNpZ24vaGVhZC9kZWZhdWx0X3JvYm90cycpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0TWF4UHJpY2UoTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3QgJHByb2R1Y3QpIHsgaWYgKCRwcm9kdWN0LT5nZXRUeXBlSWQoKSA9PSBNYWdlX0NhdGFsb2dfTW9kZWxfUHJvZHVjdF9UeXBlX0NvbmZpZ3VyYWJsZTo6VFlQRV9DT0RFKSB7IHJldHVybiAkdGhpcy0+X2dldENvbmZpZ3VyYWJsZVByb2R1Y3RNYXhQcmljZSgkcHJvZHVjdCk7IH0gcmV0dXJuICRwcm9kdWN0LT5nZXRGaW5hbFByaWNlKCk7IH0gcHJvdGVjdGVkIGZ1bmN0aW9uIF9nZXRDb25maWd1cmFibGVQcm9kdWN0TWF4UHJpY2UoTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3QgJHByb2R1Y3QpIHsgJHByb2R1Y3RQcmljZSA9ICRwcm9kdWN0LT5nZXRGaW5hbFByaWNlKCk7ICRhdHRyaWJ1dGVzID0gJHByb2R1Y3QtPmdldFR5cGVJbnN0YW5jZSgpLT5nZXRDb25maWd1cmFibGVBdHRyaWJ1dGVzKCRwcm9kdWN0KTsgJGF0dHJpYnV0ZXNQcmljZSA9IDAuMDsgZm9yZWFjaCAoJGF0dHJpYnV0ZXMgYXMgJGF0dHJpYnV0ZSkgeyAkYXR0cmlidXRlTWF4UHJpY2UgPSAwLjA7IGlmICgkcHJpY2VzID0gJGF0dHJpYnV0ZS0+Z2V0UHJpY2VzKCkpIHsgZm9yZWFjaCAoJHByaWNlcyBhcyAkcHJpY2UpIHsgaWYgKCRwcmljZVsnaXNfcGVyY2VudCddKSB7ICRwcmljZVZhbHVlID0gJHByb2R1Y3RQcmljZSAqICRwcmljZVsncHJpY2luZ192YWx1ZSddIC8gMTAwOyB9IGVsc2UgeyAkcHJpY2VWYWx1ZSA9ICRwcmljZVsncHJpY2luZ192YWx1ZSddOyB9ICRhdHRyaWJ1dGVNYXhQcmljZSA9IG1heCgkYXR0cmlidXRlTWF4UHJpY2UsICRwcmljZVZhbHVlKTsgfSB9ICRhdHRyaWJ1dGVzUHJpY2UgKz0gJGF0dHJpYnV0ZU1heFByaWNlOyB9ICRwcm9kdWN0UHJpY2UgKz0gJGF0dHJpYnV0ZXNQcmljZTsgcmV0dXJuICRwcm9kdWN0UHJpY2U7IH0gcHVibGljIGZ1bmN0aW9uIGdldEdyb3VwZWRQcm9kdWN0UHJpY2VzKE1hZ2VfQ2F0YWxvZ19Nb2RlbF9Qcm9kdWN0ICRwcm9kdWN0KSB7IGlmICgkcHJvZHVjdC0+Z2V0VHlwZUlkKCkgPT0gTWFnZV9DYXRhbG9nX01vZGVsX1Byb2R1Y3RfVHlwZV9Hcm91cGVkOjpUWVBFX0NPREUpIHsgJG1heFByaWNlID0gMC4wOyAkbWluUHJpY2UgPSAkcHJvZHVjdC0+Z2V0TWluaW1hbFByaWNlKCk7ICRhc3NvY2lhdGVkUHJvZHVjdHMgPSAkcHJvZHVjdC0+Z2V0VHlwZUluc3RhbmNlKCktPmdldEFzc29jaWF0ZWRQcm9kdWN0cygkcHJvZHVjdCk7IGZvcmVhY2ggKCRhc3NvY2lhdGVkUHJvZHVjdHMgYXMgJF9wcm9kdWN0KSB7ICRtYXhQcmljZSA9IG1heCgkbWF4UHJpY2UsICRfcHJvZHVjdC0+Z2V0RmluYWxQcmljZSgpKTsgJG1pblByaWNlID0gbWluKCRtaW5QcmljZSwgJF9wcm9kdWN0LT5nZXRGaW5hbFByaWNlKCkpOyB9IHJldHVybiBuZXcgVmFyaWVuX09iamVjdChhcnJheSgnbWluX3ByaWNlJyA9PiAkbWluUHJpY2UsICdtYXhfcHJpY2UnID0+ICRtYXhQcmljZSkpOyB9IHJldHVybiBuZXcgVmFyaWVuX09iamVjdCgpOyB9IHB1YmxpYyBmdW5jdGlvbiBnZXRBbGxTdG9yZURvbWFpbnMoKSB7ICRkb21haW5zID0gYXJyYXkoKTsgZm9yZWFjaCAoTWFnZTo6YXBwKCktPmdldFdlYnNpdGVzKCkgYXMgJHdlYnNpdGUpIHsgJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi91bnNlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSAkdXJsID0gJHdlYnNpdGUtPmdldENvbmZpZygnd2ViL3NlY3VyZS9iYXNlX3VybCcpOyBpZiAoJGRvbWFpbiA9IHRyaW0ocHJlZ19yZXBsYWNlKCcvXi4qP1xcL1xcLyguKik/XFwvLycsICckMScsICR1cmwpKSkgeyAkZG9tYWluc1tdID0gJGRvbWFpbjsgfSB9IHJldHVybiBhcnJheV91bmlxdWUoJGRvbWFpbnMpOyB9IHB1YmxpYyBmdW5jdGlvbiBnYSgpIHsgcmV0dXJuIFplbmRfSnNvbjo6ZGVjb2RlKGJhc2U2NF9kZWNvZGUoTWFnZTo6aGVscGVyKCdjb3JlJyktPmRlY3J5cHQoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Nlb2Jvb3N0ZXIvYXInKSkpKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlV2Vic2l0ZXMoKSB7IHJldHVybiAkdGhpcy0+X3coKTsgfSBwcm90ZWN0ZWQgZnVuY3Rpb24gX3coKSB7IGlmICghTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Nlb2Jvb3N0ZXIvaW5zdGFsbGVkJykgfHwgKGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2VvYm9vc3Rlci9jb3VudCcpKSA+IDEwKSApIHsgcmV0dXJuIGFycmF5KCk7IH0gJHRpbWVfdG9fdXBkYXRlID0gNjAgKiA2MCAqIDI0ICogMTU7ICRyID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Nlb2Jvb3N0ZXIvYXInKTsgJHQgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2VvYm9vc3Rlci90aW1lJyk7ICRzID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Nlb2Jvb3N0ZXIvd2Vic2l0ZXMnKTsgJGxhc3RfY2hlY2sgPSBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCR0KSk7ICRhbGxzaXRlcyA9IGV4cGxvZGUoJywnLCBzdHJfcmVwbGFjZSgkciwgJycsIE1hZ2U6OmhlbHBlcignY29yZScpLT5kZWNyeXB0KCRzKSkpOyAkYWxsc2l0ZXMgPSBhcnJheV9kaWZmKCRhbGxzaXRlcywgYXJyYXkoIiIpKTsgaWYgKCgkbGFzdF9jaGVjayArICR0aW1lX3RvX3VwZGF0ZSkgPCB0aW1lKCkpIHsgJHRoaXMtPmEoTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3Nlb2Jvb3N0ZXIva2V5JyksIGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2VvYm9vc3Rlci9jb3VudCcpKSwgaW1wbG9kZSgnLCcsICRhbGxzaXRlcykgKTsgfSByZXR1cm4gJGFsbHNpdGVzOyB9IHB1YmxpYyBmdW5jdGlvbiBhKCRrLCAkYyA9IDAsICRzID0gJycpIHsgJGNoID0gY3VybF9pbml0KCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9VUkwsIHNwcmludGYoJ2h0dHBzOi8vd3d3LmdvbWFnZS5jb20vaW5kZXgucGhwL2dvbWFnZV9kb3dubG9hZGFibGUva2V5L2NoZWNrJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAna2V5PScgLiB1cmxlbmNvZGUoJGspIC4gJyZza3U9c2VvLWJvb3N0ZXImZG9tYWlucz0nIC4gdXJsZW5jb2RlKGltcGxvZGUoJywnLCAkdGhpcy0+Z2V0QWxsU3RvcmVEb21haW5zKCkpKSAuICcmdmVyPScgLiB1cmxlbmNvZGUoJzEuMycpKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1RJTUVPVVQsIDMwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCAwKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllIT1NULCAwKTsgJGNvbnRlbnQgPSBjdXJsX2V4ZWMoJGNoKTsgJHIgPSBaZW5kX0pzb246OmRlY29kZSgkY29udGVudCk7ICRlID0gTWFnZTo6aGVscGVyKCdjb3JlJyk7IGlmIChlbXB0eSgkcikpIHsgJHZhbHVlMSA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9zZW9ib29zdGVyL2FyJyk7ICRncm91cHMgPSBhcnJheSggJ3Nlb2Jvb3N0ZXInID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZylNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2VvYm9vc3Rlci93ZWJzaXRlcycpICksICd0aW1lJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSRlLT5lbmNyeXB0KCR2YWx1ZTEgLiAodGltZSgpIC0gKDYwICogNjAgKiAyNCAqIDE1IC0gMTgwMCkpIC4gJHZhbHVlMSkgKSwgJ2NvdW50JyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkYyArIDEpICkgKSApOyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5odG1sL2NvbmZpZ19kYXRhJykgLT5zZXRTZWN0aW9uKCdnb21hZ2VfYWN0aXZhdGlvbicpIC0+c2V0R3JvdXBzKCRncm91cHMpIC0+c2F2ZSgpOyBNYWdlOjpnZXRDb25maWcoKS0+cmVpbml0KCk7IE1hZ2U6OmFwcCgpLT5yZWluaXRTdG9yZXMoKTsgcmV0dXJuOyB9ICR2YWx1ZTEgPSAnJzsgJHZhbHVlMiA9ICcnOyBpZiAoaXNzZXQoJHJbJ2QnXSkgJiYgaXNzZXQoJHJbJ2MnXSkpIHsgJHZhbHVlMSA9ICRlLT5lbmNyeXB0KGJhc2U2NF9lbmNvZGUoWmVuZF9Kc29uOjplbmNvZGUoJHIpKSk7IGlmICghJHMpIHsgJHMgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2VvYm9vc3Rlci93ZWJzaXRlcycpOyB9ICRzID0gYXJyYXlfc2xpY2UoZXhwbG9kZSgnLCcsICRzKSwgMCwgJHJbJ2MnXSk7ICR2YWx1ZTIgPSAkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gaW1wbG9kZSgnLCcsICRzKSAuICR2YWx1ZTEpOyB9ICRncm91cHMgPSBhcnJheSggJ3Nlb2Jvb3N0ZXInID0+IGFycmF5KCAnZmllbGRzJyA9PiBhcnJheSggJ2FyJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAkdmFsdWUxICksICd3ZWJzaXRlcycgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkdmFsdWUyICksICd0aW1lJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSRlLT5lbmNyeXB0KCR2YWx1ZTEgLiB0aW1lKCkgLiAkdmFsdWUxKSApLCAnaW5zdGFsbGVkJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAxICksICdjb3VudCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gMCkgKSApICk7IE1hZ2U6OmdldE1vZGVsKCdhZG1pbmh0bWwvY29uZmlnX2RhdGEnKSAtPnNldFNlY3Rpb24oJ2dvbWFnZV9hY3RpdmF0aW9uJykgLT5zZXRHcm91cHMoJGdyb3VwcykgLT5zYXZlKCk7IE1hZ2U6OmdldENvbmZpZygpLT5yZWluaXQoKTsgTWFnZTo6YXBwKCktPnJlaW5pdFN0b3JlcygpOyB9IHB1YmxpYyBmdW5jdGlvbiBub3RpZnkoKSB7ICRmcmVxdWVuY3kgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfZnJlcXVlbmN5JykpOyBpZiAoISRmcmVxdWVuY3kpIHsgJGZyZXF1ZW5jeSA9IDI0OyB9ICRsYXN0X3VwZGF0ZSA9IGludHZhbChNYWdlOjphcHAoKS0+bG9hZENhY2hlKCdnb21hZ2Vfbm90aWZpY2F0aW9uc19sYXN0X3VwZGF0ZScpKTsgaWYgKCgkZnJlcXVlbmN5ICogNjAgKiA2MCArICRsYXN0X3VwZGF0ZSkgPiB0aW1lKCkpIHsgcmV0dXJuIGZhbHNlOyB9ICR0aW1lc3RhbXAgPSAkbGFzdF91cGRhdGU7IGlmICghJHRpbWVzdGFtcCkgeyAkdGltZXN0YW1wID0gdGltZSgpOyB9IHRyeSB7ICRjaCA9IGN1cmxfaW5pdCgpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCBzcHJpbnRmKCdodHRwczovL3d3dy5nb21hZ2UuY29tL2luZGV4LnBocC9nb21hZ2Vfbm90aWZpY2F0aW9uL2luZGV4L2RhdGEnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICdza3U9c2VvLWJvb3N0ZXImdGltZXN0YW1wPScgLiAkdGltZXN0YW1wIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnMS4zJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkcmVzdWx0ID0gWmVuZF9Kc29uOjpkZWNvZGUoJGNvbnRlbnQpOyBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydmcmVxdWVuY3knXSkgJiYgKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddICE9ICRmcmVxdWVuY3kpKSB7IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUoJHJlc3VsdFsnZnJlcXVlbmN5J10sICdnb21hZ2Vfbm90aWZpY2F0aW9uc19mcmVxdWVuY3knKTsgfSBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydkYXRhJ10pKSB7IGlmICghZW1wdHkoJHJlc3VsdFsnZGF0YSddKSkgeyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5ub3RpZmljYXRpb24vaW5ib3gnKS0+cGFyc2UoJHJlc3VsdFsnZGF0YSddKTsgfSB9IH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgeyB9IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUodGltZSgpLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKTsgfSBwdWJsaWMgZnVuY3Rpb24gZm9ybWF0VXJsVmFsdWUoJHZhbHVlLCAkZGVmYXVsdCA9ICcnKSB7ICRvbGRMb2NhbGUgPSBzZXRsb2NhbGUoTENfQ09MTEFURSwgIjAiKTsgJGxvY2FsZUNvZGUgPSBNYWdlOjphcHAoKS0+Z2V0TG9jYWxlKCktPmdldExvY2FsZUNvZGUoKTsgc2V0bG9jYWxlKExDX0NPTExBVEUsICRsb2NhbGVDb2RlIC4gJy5VVEY4JywgJ0MuVVRGLTgnLCAnZW5fVVMudXRmOCcpOyAkdmFsdWUgPSBpY29udihtYl9kZXRlY3RfZW5jb2RpbmcoJHZhbHVlKSwgJ0FTQ0lJLy9UUkFOU0xJVCcsICR2YWx1ZSk7IHNldGxvY2FsZShMQ19DT0xMQVRFLCAkb2xkTG9jYWxlKTsgJHZhbHVlID0gc3RydG9sb3dlcigkdmFsdWUpOyAkdmFsdWUgPSBwcmVnX3JlcGxhY2UoJyNbXjAtOWEtel0rI2knLCAnXycsIE1hZ2U6OmhlbHBlcignY2F0YWxvZy9wcm9kdWN0X3VybCcpLT5mb3JtYXQoJHZhbHVlKSk7ICR2YWx1ZSA9IHRyaW0oJHZhbHVlLCAnXycpOyByZXR1cm4gJHZhbHVlID8gJHZhbHVlIDogJGRlZmF1bHQ7IH0gcHVibGljIGZ1bmN0aW9uIGlzR29NYWdlQ2hlY2tvdXRFbmFibGVkKCkgeyAkbW9kdWxlcyA9IChhcnJheSlNYWdlOjpnZXRDb25maWcoKS0+Z2V0Tm9kZSgnbW9kdWxlcycpLT5jaGlsZHJlbigpOyByZXR1cm4gaXNzZXQoJG1vZHVsZXNbJ0dvTWFnZV9DaGVja291dCddKSAmJiAkbW9kdWxlc1snR29NYWdlX0NoZWNrb3V0J10tPmlzKCdhY3RpdmUnKTsgfSB9"));